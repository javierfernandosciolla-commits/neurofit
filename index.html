<script type="text/babel">
    const { useState, useEffect } = React;

    // ... (Mantener juegos de Memoria, Velocidad y Atenci√≥n)

    // --- JUEGO DE LENGUAJE 1: FORMA LA PALABRA ---
    const LanguageGame = ({ onComplete }) => {
        const [target, setTarget] = useState({ w: '', h: '' });
        const [scrambled, setScrambled] = useState([]);
        const [userWord, setUserWord] = useState([]);
        const [score, setScore] = useState(0);
        const [time, setTime] = useState(90);
        
        const words = [
            { w: 'CEREBRO', h: '√ìrgano principal del sistema nervioso' },
            { w: 'MEMORIA', h: 'Capacidad de recordar informaci√≥n' },
            { w: 'NEURONA', h: 'C√©lula b√°sica del cerebro' },
            { w: 'LOGICA', h: 'Forma de pensar ordenada' }
        ];

        const gen = () => {
            const obj = words[Math.floor(Math.random() * words.length)];
            setTarget(obj);
            setScrambled(obj.w.split('').sort(() => Math.random() - 0.5));
            setUserWord([]);
        };

        useEffect(() => {
            gen();
            const t = setInterval(() => setTime(p => { if(p<=1) { clearInterval(t); onComplete(score); } return p-1; }), 1000);
            return () => clearInterval(t);
        }, []);

        const addL = (l, i) => {
            setUserWord([...userWord, l]);
            setScrambled(scrambled.filter((_, idx) => idx !== i));
        };

        const check = () => {
            if (userWord.join('') === target.w) {
                setScore(score + 250);
                gen();
            } else {
                setScrambled([...scrambled, ...userWord]);
                setUserWord([]);
            }
        };

        return (
            <div className="p-4 text-center">
                <div className="flex justify-between mb-4 font-bold text-teal-600"><span>‚è±Ô∏è {time}s</span><span>‚≠ê {score}</span></div>
                <div className="bg-blue-50 p-4 rounded-xl mb-4">
                    <p className="text-xs font-bold text-blue-400 uppercase">Pista</p>
                    <p className="font-bold text-blue-800">{target.h}</p>
                </div>
                <div className="flex flex-wrap justify-center gap-2 mb-6 min-h-[50px] border-b-2 border-dashed border-gray-200 pb-4">
                    {userWord.map((l, i) => <span key={i} className="w-10 h-10 bg-blue-500 text-white rounded-lg flex items-center justify-center font-bold text-xl">{l}</span>)}
                </div>
                <div className="flex flex-wrap justify-center gap-2 mb-6">
                    {scrambled.map((l, i) => <button key={i} onClick={() => addL(l, i)} className="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center font-bold text-xl hover:bg-gray-200">{l}</button>)}
                </div>
                <button onClick={check} className="w-full py-4 bg-teal-500 text-white rounded-xl font-bold uppercase tracking-widest shadow-lg">Comprobar</button>
            </div>
        );
    };

    // --- APP PRINCIPAL ACTUALIZADA ---
    const App = () => {
        const [screen, setScreen] = useState('home');
        const [user, setUser] = useState({ points: 800, levels: 3 });

        const finish = (p) => {
            setUser(prev => ({ points: prev.points + p, levels: prev.levels + 1 }));
            setScreen('home');
        };

        return (
            <div className="min-h-screen flex flex-col items-center p-4">
                {screen === 'home' && (
                    <div className="w-full max-w-md">
                        <div className="bg-white p-6 rounded-3xl shadow-lg mb-8 flex justify-between items-center text-center">
                            <div><p className="text-xs font-bold text-gray-400 uppercase tracking-tighter">Puntos</p><p className="text-2xl font-black text-purple-600">{user.points}</p></div>
                            <span className="text-4xl">üß†</span>
                            <div><p className="text-xs font-bold text-gray-400 uppercase tracking-tighter">Niveles</p><p className="text-2xl font-black text-blue-600">{user.levels}</p></div>
                        </div>
                        <div className="space-y-4">
                            <div onClick={() => setScreen('mem_sel')} className="game-btn bg-white p-6 rounded-3xl shadow border-b-8 border-purple-500 flex items-center"><span className="text-4xl mr-4">üß©</span><p className="font-black text-gray-700 uppercase">Memoria</p></div>
                            <div onClick={() => setScreen('spd_sel')} className="game-btn bg-white p-6 rounded-3xl shadow border-b-8 border-blue-500 flex items-center"><span className="text-4xl mr-4">‚ö°</span><p className="font-black text-gray-700 uppercase">Velocidad</p></div>
                            <div onClick={() => setScreen('att_sel')} className="game-btn bg-white p-6 rounded-3xl shadow border-b-8 border-orange-500 flex items-center"><span className="text-4xl mr-4">üëÅÔ∏è</span><p className="font-black text-gray-700 uppercase">Atenci√≥n</p></div>
                            <div onClick={() => setScreen('len_sel')} className="game-btn bg-white p-6 rounded-3xl shadow border-b-8 border-teal-500 flex items-center"><span className="text-4xl mr-4">üìù</span><p className="font-black text-gray-700 uppercase">Lenguaje</p></div>
                            <div onClick={() => setScreen('g_logic')} className="game-btn bg-white p-6 rounded-3xl shadow border-b-8 border-indigo-500 flex items-center"><span className="text-4xl mr-4">üí°</span><p className="font-black text-gray-700 uppercase">L√≥gica</p></div>
                        </div>
                    </div>
                )}

                {screen === 'len_sel' && (
                    <div className="w-full max-w-md bg-white p-8 rounded-3xl shadow-xl text-center">
                        <h2 className="text-xl font-black mb-6 uppercase tracking-widest text-teal-600">Juegos de Lenguaje</h2>
                        <div className="grid gap-3">
                            <button onClick={() => setScreen('g_lang1')} className="bg-teal-100 text-teal-700 p-4 rounded-2xl font-bold">FORMA LA PALABRA</button>
                            <button disabled className="bg-gray-100 text-gray-400 p-4 rounded-2xl font-bold border-2 border-dashed border-gray-200 cursor-not-allowed">PR√ìXIMAMENTE</button>
                            <button onClick={() => setScreen('home')} className="mt-4 text-gray-400 font-bold">VOLVER</button>
                        </div>
                    </div>
                )}

                <div className="w-full max-w-md bg-white rounded-3xl shadow-2xl overflow-hidden mt-4">
                    {screen === 'g_lang1' && <LanguageGame onComplete={finish} />}
                    {screen === 'g_logic' && <LogicGame onComplete={finish} />}
                    {/* ... (Otros juegos g_pairs, g_simon, etc.) */}
                    {screen.startsWith('g_') && <button onClick={() => setScreen('home')} className="w-full py-4 text-xs font-bold text-gray-300 border-t border-gray-50 uppercase tracking-widest">Abandonar</button>}
                </div>
            </div>
        );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
</script>
