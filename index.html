<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroFit - Training Center</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; font-family: sans-serif; background-color: #f8fafc; }
        .game-btn { transition: all 0.2s; cursor: pointer; }
        .game-btn:hover { transform: translateY(-4px); }
        .answer-btn { transition: transform 0.1s; }
        .answer-btn:active { transform: scale(0.95); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONOS ---
        const BrainIcon = () => <span className="text-4xl mb-2">üß†</span>;

        // --- JUEGO: PARES DE CARTAS ---
        const MemoryGame = ({ onComplete }) => {
            const [cards, setCards] = useState([]);
            const [flipped, setFlipped] = useState([]);
            const [matched, setMatched] = useState([]);
            const symbols = ['üçé', 'üçä', 'üçã', 'üçá', 'üçì', 'üçí'];
            useEffect(() => {
                setCards([...symbols, ...symbols].sort(() => Math.random() - 0.5).map((s, i) => ({ id: i, s })));
            }, []);
            const handle = (i) => {
                if (flipped.length === 2 || flipped.includes(i) || matched.includes(i)) return;
                const newF = [...flipped, i];
                setFlipped(newF);
                if (newF.length === 2) {
                    if (cards[newF[0]].s === cards[newF[1]].s) { setMatched([...matched, ...newF]); setFlipped([]); }
                    else { setTimeout(() => setFlipped([]), 700); }
                }
            };
            useEffect(() => { if (matched.length === 12) onComplete(800); }, [matched]);
            return (
                <div className="p-4 grid grid-cols-4 gap-2">
                    {cards.map((c, i) => (
                        <div key={i} onClick={() => handle(i)} className={`h-16 rounded-xl flex items-center justify-center text-2xl shadow cursor-pointer ${flipped.includes(i) || matched.includes(i) ? 'bg-white border-2 border-purple-400' : 'bg-purple-500 text-white font-bold'}`}>
                            {flipped.includes(i) || matched.includes(i) ? c.s : '?'}
                        </div>
                    ))}
                </div>
            );
        };

        // --- JUEGO: SIMON ---
        const Memory2Game = ({ onComplete }) => {
            const [seq, setSeq] = useState([]);
            const [userSeq, setUserSeq] = useState([]);
            const [active, setActive] = useState(null);
            const colors = ['red', 'blue', 'green', 'yellow'];
            const start = (curr = []) => {
                const n = colors[Math.floor(Math.random() * 4)];
                const newS = [...curr, n];
                setSeq(newS); setUserSeq([]); play(newS);
            };
            const play = async (s) => {
                for (let c of s) {
                    await new Promise(r => setTimeout(r, 400)); setActive(c);
                    await new Promise(r => setTimeout(r, 400)); setActive(null);
                }
            };
            const click = (c) => {
                setActive(c); setTimeout(() => setActive(null), 200);
                const next = [...userSeq, c]; setUserSeq(next);
                if (c !== seq[next.length - 1]) { onComplete((seq.length - 1) * 200); return; }
                if (next.length === seq.length) setTimeout(() => start(seq), 800);
            };
            useEffect(() => start(), []);
            return (
                <div className="p-6 grid grid-cols-2 gap-4">
                    {colors.map(c => <div key={c} onClick={() => click(c)} className={`h-24 w-24 rounded-full shadow-lg ${active === c ? 'brightness-150 scale-105' : 'opacity-70'} ${c === 'red' ? 'bg-red-500' : c === 'blue' ? 'bg-blue-500' : c === 'green' ? 'bg-green-500' : 'bg-yellow-400'}`} />)}
                </div>
            );
        };

        // --- JUEGO: C√ÅLCULO R√ÅPIDO ---
        const SpeedGame = ({ onComplete }) => {
            const [q, setQ] = useState(null);
            const [score, setScore] = useState(0);
            const [time, setTime] = useState(30);
            const gen = () => {
                const n1 = Math.floor(Math.random()*20)+5;
                const n2 = Math.floor(Math.random()*20)+5;
                const ans = n1 + n2;
                setQ({n1, n2, ans, alt: [ans, ans+2, ans-3].sort(() => Math.random()-0.5)});
            };
            useEffect(() => {
                gen();
                const t = setInterval(() => setTime(p => { if(p<=1) { clearInterval(t); onComplete(score); } return p-1; }), 1000);
                return () => clearInterval(t);
            }, []);
            return (
                <div className="p-6 text-center">
                    <div className="flex justify-between mb-4 font-bold text-blue-600"><span>‚è±Ô∏è {time}s</span><span>‚≠ê {score}</span></div>
                    {q && <div>
                        <div className="text-5xl font-black mb-6">{q.n1}+{q.n2}</div>
                        <div className="grid gap-2">{q.alt.map(a => <button key={a} onClick={() => { if(a===q.ans) setScore(score+100); gen(); }} className="bg-blue-500 text-white py-4 rounded-xl font-bold">{a}</button>)}</div>
                    </div>}
                </div>
            );
        };

        // --- JUEGO: COMPARACI√ìN R√ÅPIDA ---
        const Speed2Game = ({ onComplete }) => {
            const [nums, setNums] = useState({ left: 0, right: 0 });
            const [score, setScore] = useState(0);
            const [time, setTime] = useState(45);
            const [feedback, setFeedback] = useState(null);

            const gen = () => {
                setNums({ left: Math.floor(Math.random()*99)+1, right: Math.floor(Math.random()*99)+1 });
                setFeedback(null);
            };

            useEffect(() => {
                gen();
                const t = setInterval(() => setTime(p => { if(p<=1) { clearInterval(t); onComplete(score); } return p-1; }), 1000);
                return () => clearInterval(t);
            }, []);

            const handle = (ans) => {
                const corr = (ans === 'ma' && nums.left > nums.right) || (ans === 'me' && nums.left < nums.right) || (ans === 'ig' && nums.left === nums.right);
                if (corr) { setScore(score + 100); setFeedback('‚úÖ'); } else { setFeedback('‚ùå'); }
                setTimeout(gen, 400);
            };

            return (
                <div className="p-4 text-center">
                    <div className="flex justify-between mb-4 font-bold text-cyan-600"><span>‚è±Ô∏è {time}s</span><span>‚≠ê {score}</span></div>
                    <div className="flex justify-center gap-4 mb-6">
                        <div className={`flex-1 p-6 rounded-2xl bg-purple-500 text-white text-5xl font-black ${feedback==='‚úÖ'?'ring-4 ring-green-400':''}`}>{nums.left}</div>
                        <div className="flex-1 p-6 rounded-2xl bg-blue-500 text-white text-5xl font-black">{nums.right}</div>
                    </div>
                    <div className="grid grid-cols-3 gap-2">
                        <button onClick={() => handle('ma')} className="bg-green-500 text-white p-4 rounded-xl font-bold answer-btn">MAYOR</button>
                        <button onClick={() => handle('ig')} className="bg-yellow-500 text-white p-4 rounded-xl font-bold answer-btn">IGUAL</button>
                        <button onClick={() => handle('me')} className="bg-red-500 text-white p-4 rounded-xl font-bold answer-btn">MENOR</button>
                    </div>
                </div>
            );
        };

        // --- APP PRINCIPAL ---
        const App = () => {
            const [screen, setScreen] = useState('home');
            const [user, setUser] = useState({ points: 0, levels: 0 });
            const finish = (p) => { setUser(prev => ({ points: prev.points + p, levels: prev.levels + 1 })); setScreen('home'); };

            return (
                <div className="min-h-screen flex flex-col items-center p-4">
                    {screen === 'home' && (
                        <div className="w-full max-w-md">
                            <div className="bg-white p-6 rounded-3xl shadow-lg mb-8 flex justify-between items-center">
                                <div><p className="text-xs font-bold text-gray-400 uppercase tracking-tighter">Puntos</p><p className="text-2xl font-black text-purple-600">{user.points}</p></div>
                                <BrainIcon />
                                <div><p className="text-xs font-bold text-gray-400 uppercase tracking-tighter">Niveles</p><p className="text-2xl font-black text-blue-600">{user.levels}</p></div>
                            </div>
                            <div className="space-y-4">
                                <div onClick={() => setScreen('mem_sel')} className="game-btn bg-white p-6 rounded-3xl shadow border-b-8 border-purple-500 flex items-center">
                                    <span className="text-4xl mr-4">üß©</span><p className="font-black text-gray-700 uppercase">Memoria</p>
                                </div>
                                <div onClick={() => setScreen('spd_sel')} className="game-btn bg-white p-6 rounded-3xl shadow border-b-8 border-blue-500 flex items-center">
                                    <span className="text-4xl mr-4">‚ö°</span><p className="font-black text-gray-700 uppercase">Velocidad</p>
                                </div>
                            </div>
                        </div>
                    )}

                    {(screen === 'mem_sel' || screen === 'spd_sel') && (
                        <div className="w-full max-w-md bg-white p-8 rounded-3xl shadow-xl text-center">
                            <h2 className="text-xl font-black mb-6 uppercase tracking-widest">Seleccionar Juego</h2>
                            <div className="grid gap-3">
                                {screen === 'mem_sel' ? (
                                    <React.Fragment>
                                        <button onClick={() => setScreen('g_pairs')} className="bg-purple-100 text-purple-700 p-4 rounded-2xl font-bold">PARES DE CARTAS</button>
                                        <button onClick={() => setScreen('g_simon')} className="bg-pink-100 text-pink-700 p-4 rounded-2xl font-bold">SECUENCIA SIMON</button>
                                    </React.Fragment>
                                ) : (
                                    <React.Fragment>
                                        <button onClick={() => setScreen('g_calc')} className="bg-blue-100 text-blue-700 p-4 rounded-2xl font-bold">C√ÅLCULO R√ÅPIDO</button>
                                        <button onClick={() => setScreen('g_comp')} className="bg-cyan-100 text-cyan-700 p-4 rounded-2xl font-bold">COMPARACI√ìN R√ÅPIDA</button>
                                    </React.Fragment>
                                )}
                                <button onClick={() => setScreen('home')} className="mt-4 text-gray-400 font-bold">VOLVER</button>
                            </div>
                        </div>
                    )}

                    <div className="w-full max-w-md bg-white rounded-3xl shadow-2xl overflow-hidden mt-4">
                        {screen === 'g_pairs' && <MemoryGame onComplete={finish} />}
                        {screen === 'g_simon' && <Memory2Game onComplete={finish} />}
                        {screen === 'g_calc' && <SpeedGame onComplete={finish} />}
                        {screen === 'g_comp' && <Speed2Game onComplete={finish} />}
                        {screen.startsWith('g_') && <button onClick={() => setScreen('home')} className="w-full py-4 text-xs font-bold text-gray-300 border-t border-gray-50 uppercase tracking-widest">Abandonar</button>}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
