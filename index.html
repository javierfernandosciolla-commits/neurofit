<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroFit - Training Center</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; font-family: sans-serif; background-color: #f8fafc; }
        .game-btn { transition: all 0.2s; cursor: pointer; }
        .game-btn:hover { transform: translateY(-4px); }
        .answer-btn { transition: transform 0.1s; }
        .answer-btn:active { transform: scale(0.95); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- COMPONENTES DE APOYO ---
        const BrainIcon = () => <span className="text-4xl mb-2">üß†</span>;

        // --- JUEGOS DE MEMORIA ---
        const MemoryGame = ({ onComplete }) => {
            const [cards, setCards] = useState([]);
            const [flipped, setFlipped] = useState([]);
            const [matched, setMatched] = useState([]);
            const symbols = ['üçé', 'üçä', 'üçã', 'üçá', 'üçì', 'üçí'];
            useEffect(() => { setCards([...symbols, ...symbols].sort(() => Math.random() - 0.5).map((s, i) => ({ id: i, s }))); }, []);
            const handle = (i) => {
                if (flipped.length === 2 || flipped.includes(i) || matched.includes(i)) return;
                const newF = [...flipped, i]; setFlipped(newF);
                if (newF.length === 2) {
                    if (cards[newF[0]].s === cards[newF[1]].s) { setMatched([...matched, ...newF]); setFlipped([]); }
                    else { setTimeout(() => setFlipped([]), 700); }
                }
            };
            useEffect(() => { if (matched.length === 12) onComplete(800); }, [matched]);
            return ( <div className="p-4 grid grid-cols-4 gap-2">{cards.map((c, i) => ( <div key={i} onClick={() => handle(i)} className={`h-16 rounded-xl flex items-center justify-center text-2xl shadow cursor-pointer ${flipped.includes(i) || matched.includes(i) ? 'bg-white border-2 border-purple-400' : 'bg-purple-500 text-white font-bold'}`}>{flipped.includes(i) || matched.includes(i) ? c.s : '?'}</div> ))}</div> );
        };

        const Memory2Game = ({ onComplete }) => {
            const [seq, setSeq] = useState([]);
            const [userSeq, setUserSeq] = useState([]);
            const [active, setActive] = useState(null);
            const colors = ['red', 'blue', 'green', 'yellow'];
            const start = (curr = []) => { const n = colors[Math.floor(Math.random() * 4)]; const newS = [...curr, n]; setSeq(newS); setUserSeq([]); play(newS); };
            const play = async (s) => { for (let c of s) { await new Promise(r => setTimeout(r, 400)); setActive(c); await new Promise(r => setTimeout(r, 400)); setActive(null); } };
            const click = (c) => { setActive(c); setTimeout(() => setActive(null), 200); const next = [...userSeq, c]; setUserSeq(next); if (c !== seq[next.length - 1]) { onComplete((seq.length - 1) * 200); return; } if (next.length === seq.length) setTimeout(() => start(seq), 800); };
            useEffect(() => start(), []);
            return ( <div className="p-6 grid grid-cols-2 gap-4">{colors.map(c => <div key={c} onClick={() => click(c)} className={`h-24 w-24 rounded-full shadow-lg ${active === c ? 'brightness-150 scale-105' : 'opacity-70'} ${c === 'red' ? 'bg-red-500' : c === 'blue' ? 'bg-blue-500' : c === 'green' ? 'bg-green-500' : 'bg-yellow-400'}`} />)}</div> );
        };

        // --- JUEGOS DE VELOCIDAD ---
        const SpeedGame = ({ onComplete }) => {
            const [q, setQ] = useState(null);
            const [score, setScore] = useState(0);
            const [time, setTime] = useState(30);
            const gen = () => { const n1 = Math.floor(Math.random()*20)+5; const n2 = Math.floor(Math.random()*20)+5; const ans = n1 + n2; setQ({n1, n2, ans, alt: [ans, ans+2, ans-3].sort(() => Math.random()-0.5)}); };
            useEffect(() => { gen(); const t = setInterval(() => setTime(p => { if(p<=1) { clearInterval(t); onComplete(score); } return p-1; }), 1000); return () => clearInterval(t); }, []);
            return ( <div className="p-6 text-center"><div className="flex justify-between mb-4 font-bold text-blue-600"><span>‚è±Ô∏è {time}s</span><span>‚≠ê {score}</span></div>{q && <div><div className="text-5xl font-black mb-6">{q.n1}+{q.n2}</div><div className="grid gap-2">{q.alt.map(a => <button key={a} onClick={() => { if(a===q.ans) setScore(score+100); gen(); }} className="bg-blue-500 text-white py-4 rounded-xl font-bold">{a}</button>)}</div></div>}</div> );
        };

        const Speed2Game = ({ onComplete }) => {
            const [nums, setNums] = useState({ left: 0, right: 0 });
            const [score, setScore] = useState(0);
            const [time, setTime] = useState(45);
            const gen = () => { setNums({ left: Math.floor(Math.random()*99)+1, right: Math.floor(Math.random()*99)+1 }); };
            useEffect(() => { gen(); const t = setInterval(() => setTime(p => { if(p<=1) { clearInterval(t); onComplete(score); } return p-1; }), 1000); return () => clearInterval(t); }, []);
            const handle = (ans) => { const corr = (ans === 'ma' && nums.left > nums.right) || (ans === 'me' && nums.left < nums.right) || (ans === 'ig' && nums.left === nums.right); if (corr) setScore(score + 100); setTimeout(gen, 400); };
            return ( <div className="p-4 text-center"><div className="flex justify-between mb-4 font-bold text-cyan-600"><span>‚è±Ô∏è {time}s</span><span>‚≠ê {score}</span></div><div className="flex justify-center gap-4 mb-6"><div className="flex-1 p-6 rounded-2xl bg-purple-500 text-white text-5xl font-black">{nums.left}</div><div className="flex-1 p-6 rounded-2xl bg-blue-500 text-white text-5xl font-black">{nums.right}</div></div><div className="grid grid-cols-3 gap-2"><button onClick={() => handle('ma')} className="bg-green-500 text-white p-4 rounded-xl font-bold answer-btn">MAYOR</button><button onClick={() => handle('ig')} className="bg-yellow-500 text-white p-4 rounded-xl font-bold answer-btn">IGUAL</button><button onClick={() => handle('me')} className="bg-red-500 text-white p-4 rounded-xl font-bold answer-btn">MENOR</button></div></div> );
        };

        // --- JUEGOS DE ATENCI√ìN ---
        const AttentionGame = ({ onComplete }) => {
            const [items, setItems] = useState([]);
            const [diffIdx, setDiffIdx] = useState(null);
            const [score, setScore] = useState(0);
            const [round, setRound] = useState(1);
            const [time, setTime] = useState(60);
            const patterns = [{ b: '‚¨õ', d: '‚¨ú' }, { b: 'üî∑', d: 'üî∂' }, { b: '‚≠ê', d: '‚ú®' }, { b: 'üåô', d: '‚òÄÔ∏è' }];
            const gen = () => { const n = Math.min(6 + Math.floor(round / 3), 12); const p = patterns[Math.floor(Math.random() * patterns.length)]; const idx = Math.floor(Math.random() * n); const its = Array(n).fill(p.b); its[idx] = p.d; setItems(its); setDiffIdx(idx); };
            useEffect(() => { gen(); const t = setInterval(() => setTime(p => { if(p<=1) { clearInterval(t); onComplete(score); } return p-1; }), 1000); return () => clearInterval(t); }, []);
            const click = (i) => { if (i === diffIdx) { setScore(score + 100 + (round * 20)); setRound(round + 1); gen(); } };
            return ( <div className="p-4 text-center"><div className="flex justify-between mb-4 font-bold text-orange-600"><span>‚è±Ô∏è {time}s</span><span>‚≠ê {score}</span></div><div className="grid grid-cols-3 gap-3">{items.map((it, i) => ( <button key={i} onClick={() => click(i)} className="aspect-square bg-orange-100 rounded-2xl text-4xl shadow-sm hover:scale-105 transition-transform">{it}</button> ))}</div></div> );
        };

        const Attention2Game = ({ onComplete }) => {
            const [word, setWord] = useState({ text: '', color: '' });
            const [score, setScore] = useState(0);
            const [time, setTime] = useState(60);
            const colorWords = ['ROJO', 'AZUL', 'VERDE', 'AMARILLO'];
            const colors = ['red', 'blue', 'green', '#eab308'];
            const colorMap = { red: 'ROJO', blue: 'AZUL', green: 'VERDE', '#eab308': 'AMARILLO' };
            const gen = () => { setWord({ text: colorWords[Math.floor(Math.random() * 4)], color: colors[Math.floor(Math.random() * 4)] }); };
            useEffect(() => { gen(); const t = setInterval(() => setTime(p => { if(p<=1) { clearInterval(t); onComplete(score); } return p-1; }), 1000); return () => clearInterval(t); }, []);
            const handle = (ans) => { if (ans === colorMap[word.color]) setScore(score + 150); gen(); };
            return ( <div className="p-4 text-center"><div className="flex justify-between mb-4 font-bold text-rose-600"><span>‚è±Ô∏è {time}s</span><span>‚≠ê {score}</span></div><p className="text-xs font-bold text-gray-400 mb-4 uppercase text-center">Toca el COLOR de la tinta</p><div className="bg-gray-50 rounded-2xl p-10 mb-6 flex justify-center items-center h-40"><span className="text-6xl font-black text-center" style={{ color: word.color }}>{word.text}</span></div><div className="grid grid-cols-2 gap-2">{colorWords.map(c => <button key={c} onClick={() => handle(c)} className="bg-indigo-500 text-white py-4 rounded-xl font-bold answer-btn">{c}</button>)}</div></div> );
        };

        // --- JUEGOS DE LENGUAJE ---
        const LanguageGame = ({ onComplete }) => {
            const [target, setTarget] = useState({ w: '', h: '' });
            const [scrambled, setScrambled] = useState([]);
            const [userWord, setUserWord] = useState([]);
            const [score, setScore] = useState(0);
            const [time, setTime] = useState(90);
            const words = [{ w: 'CEREBRO', h: '√ìrgano principal del sistema nervioso' }, { w: 'MEMORIA', h: 'Capacidad de recordar informaci√≥n' }, { w: 'NEURONA', h: 'C√©lula b√°sica del cerebro' }, { w: 'LOGICA', h: 'Forma de pensar ordenada' }];
            const gen = () => { const obj = words[Math.floor(Math.random() * words.length)]; setTarget(obj); setScrambled(obj.w.split('').sort(() => Math.random() - 0.5)); setUserWord([]); };
            useEffect(() => { gen(); const t = setInterval(() => setTime(p => { if(p<=1) { clearInterval(t); onComplete(score); } return p-1; }), 1000); return () => clearInterval(t); }, []);
            const addL = (l, i) => { setUserWord([...userWord, l]); setScrambled(scrambled.filter((_, idx) => idx !== i)); };
            const check = () => { if (userWord.join('') === target.w) { setScore(score + 250); gen(); } else { setScrambled([...scrambled, ...userWord]); setUserWord([]); } };
            return ( <div className="p-4 text-center"><div className="flex justify-between mb-4 font-bold text-teal-600"><span>‚è±Ô∏è {time}s</span><span>‚≠ê {score}</span></div><div className="bg-blue-50 p-4 rounded-xl mb-4 text-center"><p className="text-xs font-bold text-blue-400 uppercase">Pista</p><p className="font-bold text-blue-800">{target.h}</p></div><div className="flex flex-wrap justify-center gap-2 mb-6 min-h-[50px] border-b-2 border-dashed border-gray-200 pb-4">{userWord.map((l, i) => <span key={i} className="w-10 h-10 bg-blue-500 text-white rounded-lg flex items-center justify-center font-bold text-xl">{l}</span>)}</div><div className="flex flex-wrap justify-center gap-2 mb-6">{scrambled.map((l, i) => <button key={i} onClick={() => addL(l, i)} className="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center font-bold text-xl hover:bg-gray-200">{l}</button>)}</div><button onClick={check} className="w-full py-4 bg-teal-500 text-white rounded-xl font-bold uppercase tracking-widest shadow-lg">Comprobar</button></div> );
        };

        const Language2Game = ({ onComplete }) => {
            const [target, setTarget] = useState('');
            const [options, setOptions] = useState([]);
            const [score, setScore] = useState(0);
            const [time, setTime] = useState(75);
            const synonymPairs = [
                { word: 'FELIZ', synonyms: ['ALEGRE', 'CONTENTO'], distractors: ['TRISTE', 'ENOJADO'] },
                { word: 'R√ÅPIDO', synonyms: ['VELOZ', '√ÅGIL'], distractors: ['LENTO', 'PAUSADO'] },
                { word: 'GRANDE', synonyms: ['ENORME', 'GIGANTE'], distractors: ['PEQUE√ëO', 'DIMINUTO'] },
                { word: 'FUERTE', synonyms: ['PODEROSO', 'ROBUSTO'], distractors: ['D√âBIL', 'FR√ÅGIL'] }
            ];
            const gen = () => {
                const pair = synonymPairs[Math.floor(Math.random() * synonymPairs.length)];
                const correct = pair.synonyms[Math.floor(Math.random() * 2)];
                const opts = [{t: correct, c: true}, {t: pair.distractors[0], c: false}, {t: pair.distractors[1], c: false}].sort(() => Math.random() - 0.5);
                setTarget(pair.word); setOptions(opts);
            };
            useEffect(() => { gen(); const t = setInterval(() => setTime(p => { if(p<=1) { clearInterval(t); onComplete(score); } return p-1; }), 1000); return () => clearInterval(t); }, []);
            const handle = (o) => { if(o.c) setScore(score + 200); gen(); };
            return ( <div className="p-4 text-center"><div className="flex justify-between mb-4 font-bold text-teal-600"><span>‚è±Ô∏è {time}s</span><span>‚≠ê {score}</span></div><p className="text-gray-500 uppercase text-xs font-bold mb-4">Busca el Sin√≥nimo</p><div className="bg-yellow-100 rounded-2xl p-8 mb-6"><span className="text-4xl font-black text-gray-800">{target}</span></div><div className="grid gap-3">{options.map((o, i) => <button key={i} onClick={() => handle(o)} className="bg-teal-500 text-white py-4 rounded-xl font-bold uppercase tracking-wider hover:bg-teal-600">{o.t}</button>)}</div></div> );
        };

        // --- JUEGO DE L√ìGICA ---
        const LogicGame = ({ onComplete }) => {
            const [series, setSeries] = useState({ sequence: [], answer: 0, options: [] });
            const [score, setScore] = useState(0);
            const [time, setTime] = useState(45);
            const gen = () => {
                const start = Math.floor(Math.random() * 10); const step = Math.floor(Math.random() * 5) + 2; const type = Math.floor(Math.random() * 3);
                let seq = [start]; for(let i=0; i<3; i++) { if(type === 0) seq.push(seq[i] + step); else if(type === 1) seq.push(seq[i] + (i+1)); else seq.push(seq[i] * 2); }
                const answer = type === 0 ? seq[3] + step : type === 1 ? seq[3] + 4 : seq[3] * 2;
                const options = [answer, answer + 2, answer - 2, answer + 5].sort(() => Math.random() - 0.5);
                setSeries({ sequence: seq, answer, options });
            };
            useEffect(() => { gen(); const t = setInterval(() => setTime(p => { if(p<=1) { clearInterval(t); onComplete(score); } return p-1; }), 1000); return () => clearInterval(t); }, []);
            const check = (opt) => { if(opt === series.answer) { setScore(score + 200); gen(); } else { gen(); } };
            return ( <div className="p-6 text-center"><div className="flex justify-between mb-4 font-bold text-indigo-600"><span>‚è±Ô∏è {time}s</span><span>‚≠ê {score}</span></div><h3 className="text-gray-500 uppercase text-xs font-bold mb-4">¬øQu√© n√∫mero sigue?</h3><div className="flex justify-center gap-3 mb-8">{series.sequence.map((n, i) => ( <div key={i} className="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center font-bold text-xl">{n}</div> ))}<div className="w-10 h-10 bg-indigo-100 border-2 border-dashed border-indigo-400 rounded-lg flex items-center justify-center font-bold text-xl text-indigo-600">?</div></div><div className="grid grid-cols-2 gap-3">{series.options.map(opt => ( <button key={opt} onClick={() => check(opt)} className="bg-indigo-600 text-white p-4 rounded-xl font-bold hover:bg-indigo-700 transition-colors">{opt}</button> ))}</div></div> );
        };

        // --- APP PRINCIPAL ---
        const App = () => {
            const [screen, setScreen] = useState('home');
            const [user, setUser] = useState({ points: 800, levels: 3 });
            const finish = (p) => { setUser(prev => ({ points: prev.points + p, levels: prev.levels + 1 })); setScreen('home'); };

            return (
                <div className="min-h-screen flex flex-col items-center p-4">
                    {screen === 'home' && (
                        <div className="w-full max-w-md">
                            <div className="bg-white p-6 rounded-3xl shadow-lg mb-8 flex justify-between items-center text-center">
                                <div><p className="text-xs font-bold text-gray-400 uppercase tracking-tighter">Puntos</p><p className="text-2xl font-black text-purple-600">{user.points}</p></div>
                                <BrainIcon />
                                <div><p className="text-xs font-bold text-gray-400 uppercase tracking-tighter">Niveles</p><p className="text-2xl font-black text-blue-600">{user.levels}</p></div>
                            </div>
                            <div className="space-y-4">
                                <div onClick={() => setScreen('mem_sel')} className="game-btn bg-white p-5 rounded-3xl shadow border-b-8 border-purple-500 flex items-center"><span className="text-3xl mr-4">üß©</span><p className="font-black text-gray-700 uppercase">Memoria</p></div>
                                <div onClick={() => setScreen('spd_sel')} className="game-btn bg-white p-5 rounded-3xl shadow border-b-8 border-blue-500 flex items-center"><span className="text-3xl mr-4">‚ö°</span><p className="font-black text-gray-700 uppercase">Velocidad</p></div>
                                <div onClick={() => setScreen('att_sel')} className="game-btn bg-white p-5 rounded-3xl shadow border-b-8 border-orange-500 flex items-center"><span className="text-3xl mr-4">üëÅÔ∏è</span><p className="font-black text-gray-700 uppercase">Atenci√≥n</p></div>
                                <div onClick={() => setScreen('len_sel')} className="game-btn bg-white p-5 rounded-3xl shadow border-b-8 border-teal-500 flex items-center"><span className="text-3xl mr-4">üìù</span><p className="font-black text-gray-700 uppercase">Lenguaje</p></div>
                                <div onClick={() => setScreen('g_logic')} className="game-btn bg-white p-5 rounded-3xl shadow border-b-8 border-indigo-500 flex items-center"><span className="text-3xl mr-4">üí°</span><p className="font-black text-gray-700 uppercase">L√≥gica</p></div>
                            </div>
                        </div>
                    )}

                    {(screen === 'mem_sel' || screen === 'spd_sel' || screen === 'att_sel' || screen === 'len_sel') && (
                        <div className="w-full max-w-md bg-white p-8 rounded-3xl shadow-xl text-center">
                            <h2 className="text-xl font-black mb-6 uppercase tracking-widest text-gray-700">Seleccionar Juego</h2>
                            <div className="grid gap-3">
                                {screen === 'mem_sel' && <React.Fragment><button onClick={() => setScreen('g_pairs')} className="bg-purple-100 text-purple-700 p-4 rounded-2xl font-bold">PARES DE CARTAS</button><button onClick={() => setScreen('g_simon')} className="bg-pink-100 text-pink-700 p-4 rounded-2xl font-bold">SECUENCIA SIMON</button></React.Fragment>}
                                {screen === 'spd_sel' && <React.Fragment><button onClick={() => setScreen('g_calc')} className="bg-blue-100 text-blue-700 p-4 rounded-2xl font-bold">C√ÅLCULO R√ÅPIDO</button><button onClick={() => setScreen('g_comp')} className="bg-cyan-100 text-cyan-700 p-4 rounded-2xl font-bold">COMPARACI√ìN R√ÅPIDA</button></React.Fragment>}
                                {screen === 'att_sel' && <React.Fragment><button onClick={() => setScreen('g_att1')} className="bg-orange-100 text-orange-700 p-4 rounded-2xl font-bold uppercase text-xs">Diferentes</button><button onClick={() => setScreen('g_att2')} className="bg-rose-100 text-rose-700 p-4 rounded-2xl font-bold uppercase text-xs">Test Stroop</button></React.Fragment>}
                                {screen === 'len_sel' && <React.Fragment><button onClick={() => setScreen('g_lang1')} className="bg-teal-100 text-teal-700 p-4 rounded-2xl font-bold uppercase text-xs">Forma la Palabra</button><button onClick={() => setScreen('g_lang2')} className="bg-emerald-100 text-emerald-700 p-4 rounded-2xl font-bold uppercase text-xs">Sin√≥nimos R√°pidos</button></React.Fragment>}
                                <button onClick={() => setScreen('home')} className="mt-4 text-gray-400 font-bold uppercase text-xs">Volver</button>
                            </div>
                        </div>
                    )}

                    <div className="w-full max-w-md bg-white rounded-3xl shadow-2xl overflow-hidden mt-4">
                        {screen === 'g_pairs' && <MemoryGame onComplete={finish} />}
                        {screen === 'g_simon' && <Memory2Game onComplete={finish} />}
                        {screen === 'g_calc' && <SpeedGame onComplete={finish} />}
                        {screen === 'g_comp' && <Speed2Game onComplete={finish} />}
                        {screen === 'g_att1' && <AttentionGame onComplete={finish} />}
                        {screen === 'g_att2' && <Attention2Game onComplete={finish} />}
                        {screen === 'g_lang1' && <LanguageGame onComplete={finish} />}
                        {screen === 'g_lang2' && <Language2Game onComplete={finish} />}
                        {screen === 'g_logic' && <LogicGame onComplete={finish} />}
                        {screen.startsWith('g_') && <button onClick={() => setScreen('home')} className="w-full py-4 text-xs font-bold text-gray-300 border-t border-gray-50 uppercase tracking-widest">Abandonar</button>}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
